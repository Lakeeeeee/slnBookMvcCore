@{
    ViewData["Title"] = "Find_password";
    Layout = "~/Views/Shared/_Layout_Login.cshtml";
}

<script type="text/javascript">
    var onloadCallback = function () {
        grecaptcha.render('html_element', {
            'sitekey': '6Lf0vO4lAAAAADrJVEDlc3YI0LtPnTKXUZkjtcv5'
        });
    };
</script>

<style>
    .linkaFormat {
        text-decoration: none;
        color: inherit
    }
</style>

<div class="container" style="margin-top:15px">
    <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a class="linkaFormat" href="~/Home/Home">回首頁</a></li>
            <li class="breadcrumb-item active" aria-current="page">忘記密碼</li>
        </ol>
    </nav>
    <div class="row">
        <div class="col-8">
            <label>廣告圖</label>
        </div>
        <div class="col-4">
            <form id="sentEmail">
                <div class="container justify-content-center bg-light" style="border-radius:10px;  padding-block:15px">
                    <p><label class="">忘記密碼</label></p>
                    <p>
                        <input type="text" placeholder="請輸入Email" name="target" id="inputEmail" />
                        <div style="block-size:inherit;" id="html_element"></div>
                        <br>
                    </p>
                    <p>
                        <button class="btn btn-outline-success" type="button" id="check">確定</button>
                    </p>
                </div>
            </form>
            <button class="btn btn-outline-success" type="button" id="demo">demo</button>
        </div>
    </div>
</div>
<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>
<script>
    const x = document.getElementById('demo');
    const E = document.getElementById('inputEmail');
    x.addEventListener('click', function () {
        E.value = "greenLake092@gmail.com";
    })
</script>

@section Scripts{
    <script>
        const check = document.querySelector('#check');
        const inputEmail = document.querySelector('#inputEmail');
        check.addEventListener('click', async (event) => {
            event.preventDefault();
            var message = "信箱沒有註冊過";
            const response = await fetch('@Url.Content("~/Member/find/")?target=' + inputEmail.value);
            const confirmString = await response.text();
            if (confirmString === "True") {
                message = "已經將查詢資料寄到您的信箱";
                alert(message);
                window.location.href = '@Url.Action("Login", "Member")';
            }
            else{
            alert(message);
            location.reload();
            }
        });
    </script>
}
        
        