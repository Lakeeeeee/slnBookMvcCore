@using prjBookMvcCore.ViewModel
@model OrderViewModel

@{
    ViewBag.Title = "訂單確認";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>
<style>
	.container {
		margin-top: 15px;
		margin-bottom: 15px;
	}

	.table {
		margin-bottom: 15px;
	}

	.order-info {
		margin-bottom: 15px;
	}

	.payment-shipping {
		margin-bottom: 15px;
	}
</style>
<script>



</script>

</head>

<body>
	<div class="container">
		<h2>確認結帳</h2>

		<div class="table">
			<h4>書籍清單</h4>
			<table class="table table-striped">
				<thead>
					<tr>
						<th>書籍名稱</th>
						<th>訂購數量</th>
						<th>金額</th>
					</tr>
				</thead>
				<tbody>
					
					@{
						int count = 1;
						decimal totalAmount = 0;
						foreach (var item in Model)
						{
							if (item.ActionDetial.ActionId == 7)
							{
								Decimal discount = Math.Floor(@item.CInformation.book.UnitPrice * @item.CInformation.bookDiscount.BookDiscountAmount);
								string bookTitle = item.CInformation.book.BookTitle.Replace("$$", "\n");
								<tr>									
									<td>@count</td>
									<td>@bookTitle</td>
									<td>@item.CInformation.bookDiscount.BookDiscountName</td>
									<td>@discount</td>
									<td>@item.CInformation.publisher.PublisherName</td>
									<td>@item.CInformation.book.UnitInStock</td>
								</tr>
								totalAmount += discount;
								count++;
							};
						};
					}
					<tr>
						<td>商品 2</td>
						<td>2</td>
						<td>200</td>
					</tr>
					<tr>
						<td>商品 3</td>
						<td>3</td>
						<td>300</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>

	<div class="row">
		<div class="col-md-12">
			<h2>訂購資訊確認</h2>
			<div class="row">
				@*<div class="col-md-6">
					<p>@request.Form["Name"]</p>
					<p>@Request.Form["Phone"]</p>
					<p>@Request.Form["Email"]</p>
					<p>@Request.Form["Address"]</p>
				</div>
				<div class="col-md-6">
					<p>@Model.PaymentMethod</p>
					<p>@Model.ShippingMethod</p>
				</div>*@
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<h2>結帳金額</h2>
			<div class="row">
				<div class="col-md-6">
					<p>總共_____件</p>
					<p>總金額：</p>
					<p>優惠折扣：</p>
					<p>運費：</p>
				</div>
				<div class="col-md-6">
					<p>結帳金額：</p>
				</div>
			</div>
		</div>
	</div>
	<div class="d-grid gap-2 c d-md-flex justify-content-md-end">
		<a href="~/Order/CheckOutInfo" class=" btn btn-primary col-4 me-md-2" type="button">返回修改</a>
		<button class="btn btn-primary col-4 me-md-2" type="button" data-bs-toggle="modal" data-bs-target="#successModal">
			確定送出
		</button>
	</div>



<div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="successModalLabel">訂單完成</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        您的訂單已完成！
      </div>
      <div class="modal-footer">
       <a href="~/Order/CheckOutFinal" class=" btn btn-primary col-4 me-md-2" type="button">確定</a>
      </div>
    </div>
  </div>
</div>
</body>
